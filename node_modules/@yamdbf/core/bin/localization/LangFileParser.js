"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Language_1 = require("./Language");
/**
 * Class for parsing `.lang` files
 * @private
 */
class LangFileParser {
    /**
     * Parse a given language file string and return a Language
     * object containing all the parsed values
     */
    static parseFile(langName, fileContents) {
        const lang = new Language_1.Language(langName);
        const blocks = fileContents.match(LangFileParser.parseBlocks);
        for (const block of blocks) {
            const match = block.match(LangFileParser.parseBlock);
            const raw = match[1];
            const key = match[2];
            const value = match[3]
                .replace(LangFileParser.stripComments, '')
                .replace(LangFileParser.trimNewlines, '')
                .trim();
            lang.strings[key] = value;
            lang.raw[key] = raw;
        }
        return lang;
    }
}
LangFileParser.parseBlock = /(\[(\w+)\]\n([\s\S]*?))(?=\n\n+?(?:## *.*\n)*\[\w+\]\n.+|\n*?$)/;
LangFileParser.parseBlocks = new RegExp(LangFileParser.parseBlock, 'g');
LangFileParser.stripComments = /^(?!$)\s*##.*\n|##.*$/gm;
LangFileParser.trimNewlines = /^\n|\n$/g;
exports.LangFileParser = LangFileParser;

//# sourceMappingURL=LangFileParser.js.map
